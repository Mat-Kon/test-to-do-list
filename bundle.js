(()=>{"use strict";const e=(e,t,a="")=>{const n=document.createElement(e),o=t.join(" ");return n.className=o,n.textContent=a,n};function t(t,a,n="",o=!0){const c=o?"active":"completed",s=n.length?n:(new Date).toLocaleString();n.length||async function(e,t,a,n){const o={title:e,description:t,date:a,status:n};let c=localStorage.getItem("tasks");c=c?JSON.parse(c):[],c.push(o),localStorage.setItem("tasks",JSON.stringify(c))}(t,a,s,o);const l=e("li",["card",c]),r=e("h2",["card__heading"],t),i=e("p",["card__description"],a),d=e("span",["card__create-date"],s),p=function(t,a,n){const o=e("div",["card__btns-container"]),c=e("button",["card__btn-complete"],n?"completed":"active");c.addEventListener("click",(()=>function(e,t){(function(e){let t=localStorage.getItem("tasks");if(t){t=JSON.parse(t);const a=t.map((t=>{if(t.title===e){const e=t.status;return t.status=!e,t}return t}));localStorage.setItem("tasks",JSON.stringify(a))}})(t),e.classList.toggle("active"),e.classList.toggle("completed"),location.reload()}(t,a)));const s=e("button",["card__btn-delete"],"delete");return s.addEventListener("click",(()=>{!function(e){let t=localStorage.getItem("tasks");if(t){t=JSON.parse(t);const a=t.filter((t=>!(t.title===e)));localStorage.setItem("tasks",JSON.stringify(a))}}(a),t.remove()})),o.append(c,s),o}(l,t,o);return l.append(d,r,i,p),l}const a=e("div",["popup"]);a.addEventListener("click",(function(e){e.target===a&&a.remove()}));const n=e("form",["create-form"]);n.addEventListener("submit",(function(e){e.preventDefault();const n=document.body,o=document.querySelector(".todo__list"),c=t(s.value,l.value);o.append(c),s.value="",l.value="",n.classList.remove("popup-open"),location.reload(),a.remove()}));const o=e("label",["create-form__label"],"Title"),c=e("label",["create-form__label"],"Description"),s=e("input",["crete-form__input"]),l=e("textarea",["crete-form__input"]),r=e("button",["create-form__add-btn"],"Add task");o.append(s),c.append(l),n.append(o,c,r),a.append(n);let i=localStorage.getItem("tasks");const d=!!i,p=document.querySelector(".management__create-btn"),u=document.querySelector(".todo__list"),m=document.getElementById("filter-select");p.addEventListener("click",(function(){const e=document.body;e.classList.add("popup-open"),e.append(a)})),m.addEventListener("change",(function(e){var t;console.log(e.value),t=m.value,document.querySelectorAll(".card").forEach((e=>{switch(t){case"all":e.style.display="flex";break;case"active":e.classList.contains("active")?e.style.display="flex":e.style.display="none";break;case"completed":e.classList.contains("completed")?e.style.display="flex":e.style.display="none"}}))})),d&&(i=JSON.parse(i),i.sort(((e,t)=>e.status?-1:1)),i.forEach((e=>{const{title:a,description:n,date:o,status:c}=e,s=t(a,n,o,c);u.append(s)})))})();