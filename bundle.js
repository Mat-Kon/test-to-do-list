(()=>{"use strict";const e=(e,t,a="")=>{const n=document.createElement(e),s=t.join(" ");return n.className=s,n.textContent=a,n};function t(t,a,n="",s=!0){const c=s?"active":"completed",o=n.length?n:(new Date).toLocaleString();n.length||async function(e,t,a,n){const s={title:e,description:t,date:a,status:n};let c=localStorage.getItem("tasks");c=c?JSON.parse(c):[],c.push(s),localStorage.setItem("tasks",JSON.stringify(c))}(t,a,o,s);const l=e("li",["card",c]),r=e("h2",["card__heading"],t),i=e("p",["card__description"],a),d=e("span",["card__create-date"],o),p=function(t,a,n){const s=e("div",["card__btns-container"]),c=e("button",["card__btn-complete"],n?"completed":"active");c.addEventListener("click",(()=>function(e,t){(function(e){let t=localStorage.getItem("tasks");if(t){t=JSON.parse(t);const a=t.map((t=>{if(t.title===e){const e=t.status;return t.status=!e,t}return t}));localStorage.setItem("tasks",JSON.stringify(a))}})(t),e.classList.toggle("active"),e.classList.toggle("completed"),location.reload()}(t,a)));const o=e("button",["card__btn-delete"],"delete");return o.addEventListener("click",(()=>{!function(e){let t=localStorage.getItem("tasks");if(t){t=JSON.parse(t);const a=t.filter((t=>!(t.title===e)));localStorage.setItem("tasks",JSON.stringify(a))}}(a),t.remove()})),s.append(c,o),s}(l,t,s);return l.append(d,r,i,p),l}const a=e("div",["popup"]);a.addEventListener("click",(function(e){e.target===a&&a.remove()}));const n=e("form",["create-form"]);n.addEventListener("submit",(function(e){e.preventDefault();const n=document.body,s=document.querySelector(".todo__list"),c=t(o.value,l.value);s.append(c),o.value="",l.value="",n.classList.remove("popup-open"),location.reload(),a.remove()}));const s=e("label",["create-form__label"],"Title"),c=e("label",["create-form__label"],"Description"),o=e("input",["crete-form__input"]);o.required=!0;const l=e("textarea",["crete-form__input"]),r=e("button",["create-form__add-btn"],"Add task");s.append(o),c.append(l),n.append(s,c,r),a.append(n);let i=localStorage.getItem("tasks");const d=!!i,p=document.querySelector(".management__create-btn"),u=document.querySelector(".todo__list"),m=document.getElementById("filter-select");p.addEventListener("click",(function(){const e=document.body;e.classList.add("popup-open"),e.append(a)})),m.addEventListener("change",(()=>{return e=m.value,void document.querySelectorAll(".card").forEach((t=>{switch(e){case"all":t.style.display="flex";break;case"active":t.classList.contains("active")?t.style.display="flex":t.style.display="none";break;case"completed":t.classList.contains("completed")?t.style.display="flex":t.style.display="none"}}));var e})),d&&(i=JSON.parse(i),i.sort(((e,t)=>e.status?-1:1)),i.forEach((e=>{const{title:a,description:n,date:s,status:c}=e,o=t(a,n,s,c);u.append(o)})))})();